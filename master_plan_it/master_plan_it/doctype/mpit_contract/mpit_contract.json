{
  "actions": [],
  "allow_import": 1,
  "allow_rename": 1,
  "autoname": "",
  "creation": "2025-12-21 22:34:32.098018",
  "doctype": "DocType",
  "editable_grid": 1,
  "engine": "InnoDB",
  "quick_entry": 1,
  "show_preview_popup": 1,
  "field_order": [
    "tb_overview",
    "sb_overview_main",
    "description",
    "vendor",
    "cb_overview_right",
    "status",
    "cost_center",
    "tb_renewal",
    "start_date",
    "end_date",
    "auto_renew",
    "next_renewal_date",
    "tb_billing",
    "section_pricing",
    "current_amount",
    "current_amount_includes_vat",
    "vat_rate",
    "billing_cycle",
    "cb_pricing_right",
    "monthly_amount_net",
    "current_amount_net",
    "current_amount_vat",
    "current_amount_gross",
    "section_terms",
    "terms",
    "planned_item",
    "tb_notes",
    "notes",
    "attachment",
    "tb_admin",
    "document_id"
  ],
  "fields": [
    {
      "fieldname": "tb_overview",
      "fieldtype": "Section Break",
      "label": "Overview"
    },
    {
      "fieldname": "sb_overview_main",
      "fieldtype": "Section Break",
      "hidden": 0
    },
    {
      "fieldname": "description",
      "fieldtype": "Data",
      "description": "Brief description (optional).",
      "in_list_view": 1,
      "label": "Description",
      "bold": 1,
      "allow_in_quick_entry": 1,
      "in_preview": 1
    },
    {
      "fieldname": "vendor",
      "fieldtype": "Link",
      "description": "Vendor",
      "in_list_view": 1,
      "in_standard_filter": 1,
      "label": "Vendor",
      "options": "MPIT Vendor",
      "reqd": 1,
      "bold": 1,
      "allow_in_quick_entry": 1,
      "in_preview": 1
    },
    {
      "fieldname": "planned_item",
      "fieldtype": "Link",
      "label": "Planned Item (coverage)",
      "options": "MPIT Planned Item",
      "description": "Link the Planned Item this contract covers (prevents double counting)."
    },
    {
      "fieldname": "cb_overview_right",
      "fieldtype": "Column Break"
    },
    {
      "default": "Active",
      "fieldname": "status",
      "fieldtype": "Select",
      "description": "Operational status.",
      "in_standard_filter": 1,
      "label": "Status",
      "options": "Draft\nActive\nPending Renewal\nRenewed\nCancelled\nExpired",
      "allow_in_quick_entry": 1,
      "in_preview": 1
    },
    {
      "fieldname": "cost_center",
      "fieldtype": "Link",
      "description": "Cost Center (Caps/Reporting).",
      "in_standard_filter": 1,
      "label": "Cost Center",
      "options": "MPIT Cost Center",
      "allow_in_quick_entry": 1,
      "reqd": 1
    },
    {
      "fieldname": "tb_renewal",
      "fieldtype": "Section Break",
      "label": "Renewal & Dates"
    },
    {
      "fieldname": "start_date",
      "fieldtype": "Date",
      "description": "Contract start date.",
      "label": "Start Date",
      "allow_in_quick_entry": 1,
      "in_preview": 1
    },
    {
      "fieldname": "end_date",
      "fieldtype": "Date",
      "description": "Contract end date.",
      "label": "End Date",
      "allow_in_quick_entry": 1,
      "in_preview": 1
    },
    {
      "default": "1",
      "fieldname": "auto_renew",
      "fieldtype": "Check",
      "description": "Auto-renew with notice.",
      "label": "Auto Renew",
      "in_standard_filter": 1,
      "in_list_view": 1,
      "allow_in_quick_entry": 1,
      "in_preview": 1
    },
    {
      "fieldname": "next_renewal_date",
      "fieldtype": "Date",
      "description": "Next renewal date (auto if missing).",
      "in_list_view": 1,
      "label": "Next Renewal Date",
      "depends_on": "eval:doc.auto_renew",
      "bold": 1,
      "allow_in_quick_entry": 1,
      "in_preview": 1
    },
    {
      "fieldname": "tb_billing",
      "fieldtype": "Section Break",
      "label": "Billing"
    },
    {
      "fieldname": "section_pricing",
      "fieldtype": "Section Break",
      "label": "Pricing",
      "description": "Recurring amount and billing cycle."
    },
    {
      "fieldname": "current_amount",
      "fieldtype": "Currency",
      "description": "Current amount for the chosen cycle (net or gross per VAT flag).",
      "label": "Current Amount",
      "in_list_view": 1,
      "allow_in_quick_entry": 1,
      "in_preview": 1
    },
    {
      "default": "0",
      "fieldname": "current_amount_includes_vat",
      "fieldtype": "Check",
      "description": "If enabled, amount includes VAT (net/calcs adjusted automatically).",
      "label": "Current Amount Includes VAT"
    },
    {
      "fieldname": "vat_rate",
      "fieldtype": "Percent",
      "description": "VAT Rate applied to current amount (uses user default if empty).",
      "label": "VAT Rate",
      "depends_on": "eval:doc.current_amount_includes_vat || doc.current_amount",
      "precision": "2"
    },
    {
      "fieldname": "billing_cycle",
      "fieldtype": "Select",
      "description": "Billing cycle for the current amount.",
      "label": "Billing Cycle",
      "options": "Monthly\nQuarterly\nAnnual\nOther",
      "in_list_view": 1,
      "allow_in_quick_entry": 1
    },
    {
      "fieldname": "cb_pricing_right",
      "fieldtype": "Column Break"
    },
    {
      "fieldname": "monthly_amount_net",
      "fieldtype": "Currency",
      "description": "Monthly (Net) equivalent calculated based on amount/cycle or spread. Empty if using rate schedule.",
      "label": "Monthly Amount (Net)",
      "read_only": 1,
      "depends_on": "eval:doc.current_amount"
    },
    {
      "fieldname": "current_amount_net",
      "fieldtype": "Currency",
      "description": "Auto-calculated (Net).",
      "label": "Net Amount",
      "read_only": 1,
      "depends_on": "eval:doc.current_amount"
    },
    {
      "fieldname": "current_amount_vat",
      "fieldtype": "Currency",
      "description": "Auto-calculated VAT.",
      "label": "VAT Amount",
      "read_only": 1,
      "depends_on": "eval:doc.current_amount"
    },
    {
      "fieldname": "current_amount_gross",
      "fieldtype": "Currency",
      "description": "Auto-calculated Gross.",
      "label": "Gross Amount",
      "read_only": 1,
      "depends_on": "eval:doc.current_amount"
    },
    {
      "fieldname": "section_terms",
      "fieldtype": "Section Break",
      "label": "Pricing Terms",
      "collapsible": 1,
      "description": "Add terms for different pricing periods. If empty, the current amount above is used."
    },
    {
      "fieldname": "terms",
      "fieldtype": "Table",
      "label": "Terms",
      "options": "MPIT Contract Term",
      "description": "Add terms to manage price changes over time. Each term has a From Date; the budget engine uses terms if present, otherwise falls back to current_amount."
    },
    {
      "fieldname": "tb_notes",
      "fieldtype": "Section Break",
      "label": "Notes"
    },
    {
      "fieldname": "notes",
      "fieldtype": "Small Text",
      "description": "Add internal notes about the contract.",
      "label": "Notes"
    },
    {
      "fieldname": "attachment",
      "fieldtype": "Attach",
      "description": "Upload the contract file.",
      "label": "Attachment"
    },
    {
      "fieldname": "tb_admin",
      "fieldtype": "Section Break",
      "label": "Admin"
    },
    {
      "fieldname": "document_id",
      "fieldtype": "Read Only",
      "label": "Document ID",
      "options": "name",
      "description": "Unique Document ID (name).",
      "in_preview": 1
    }
  ],
  "grid_page_length": 50,
  "index_web_pages_for_search": 1,
  "links": [],
  "modified": "2025-12-24 20:00:43.898411",
  "modified_by": "Administrator",
  "module": "Master Plan IT",
  "name": "MPIT Contract",
  "owner": "Administrator",
  "permissions": [
    {
      "create": 1,
      "delete": 1,
      "email": 1,
      "import": 1,
      "export": 1,
      "print": 1,
      "read": 1,
      "report": 1,
      "role": "System Manager",
      "share": 1,
      "write": 1
    },
    {
      "create": 1,
      "delete": 1,
      "email": 1,
      "import": 1,
      "export": 1,
      "print": 1,
      "read": 1,
      "report": 1,
      "role": "vCIO Manager",
      "share": 1,
      "write": 1
    },
    {
      "create": 1,
      "delete": 1,
      "email": 1,
      "export": 1,
      "print": 1,
      "read": 1,
      "report": 1,
      "role": "Client Editor",
      "share": 1,
      "write": 1
    },
    {
      "email": 1,
      "export": 1,
      "print": 1,
      "read": 1,
      "report": 1,
      "role": "Client Viewer",
      "share": 1
    }
  ],
  "row_format": "Dynamic",
  "rows_threshold_for_grid_search": 20,
  "sort_field": "modified",
  "sort_order": "DESC",
  "states": [],
  "title_field": "description",
  "track_changes": 1
}